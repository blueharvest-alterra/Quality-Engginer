{"name":"User fails to create a new promo due to missing required fields","id":"create-new-promo;user-fails-to-create-a-new-promo-due-to-missing-required-fields","scenarioId":"api/promo/Admin/CreateNewPromo:User fails to create a new promo due to missing required fields","methodName":"User fails to create a new promo due to missing required fields","testSteps":[{"number":1,"description":"Given I set API endpoint for creating a new promo","duration":14,"startTime":"2024-06-13T22:21:17.682832600+07:00[Asia/Jakarta]","result":"SUCCESS","precondition":false,"level":0},{"number":2,"description":"When I send a POST request promo with missing required fields","duration":236,"startTime":"2024-06-13T22:21:17.702849+07:00[Asia/Jakarta]","result":"SUCCESS","precondition":false,"level":0,"children":[{"number":3,"description":"POST https://blueharvest.irvansn.com/v1/promos","duration":0,"startTime":"2024-06-13T22:21:17.933588600+07:00[Asia/Jakarta]","result":"SUCCESS","restQuery":{"method":"POST","path":"https://blueharvest.irvansn.com/v1/promos","content":"{\n    \"amount\": \"\",\n    \"code\": \"\",\n    \"name\": \"\",\n    \"status\": \"\"\n}","contentType":"application/json","requestHeaders":"Authorization\u003deyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJJRCI6ImFlYjVkMGZkLTVmNWYtNGIxZC04NjM1LTVjMmJlZTc5MGM5ZCIsIkVtYWlsIjoiaXJ2YW4tc3VyeWEtYWRtaW4tMkBibHVlaGFydmVzdC5jb20iLCJGdWxsTmFtZSI6IklydmFuIiwiUm9sZSI6ImFkbWluIiwiZXhwIjoxNzE4MTc3NjYwfQ.Le6i1sMV8hEuCc7DgJOI_k6tZ0G4Y7AV2sL91ex78gE\r\n\t\t\t\tAccept\u003d*/*\r\n\t\t\t\tContent-Type\u003dapplication/json","requestCookies":"","responseHeaders":"Date: Thu, 13 Jun 2024 15:21:17 GMT\r\nContent-Type: application/json\r\nContent-Length: 226\r\nConnection: keep-alive\r\nVary: Origin\r\nCF-Cache-Status: DYNAMIC\r\nReport-To: {\"endpoints\":[{\"url\":\"https:\\/\\/a.nel.cloudflare.com\\/report\\/v4?s\u003dYpGTbszgpO%2BdzpIwnskS64g3YMo3rFhTVh9r%2B63XnH5ZdMnkZKsGgg4J4q0nQb8qvI%2FbRcjXqQWlHGCUu%2Fewu%2BkXlo8EUxFhkcB%2Bnlx4QWh8Scg1F04OXJ5iEmwhOO2J07NxB2iqvuxLJg%3D%3D\"}],\"group\":\"cf-nel\",\"max_age\":604800}\r\nNEL: {\"success_fraction\":0,\"report_to\":\"cf-nel\",\"max_age\":604800}\r\nServer: cloudflare\r\nCF-RAY: 893311cbfd086be2-SIN\r\nalt-svc: h3\u003d\":443\"; ma\u003d86400\r","responseCookies":"\r","responseBody":"{\n    \"status\": false,\n    \"message\": \"code\u003d400, message\u003dUnmarshal type error: expected\u003dfloat64, got\u003dstring, field\u003damount, offset\u003d12, internal\u003djson: cannot unmarshal string into Go struct field CreatePromoRequest.amount of type float64\"\n}","statusCode":500},"precondition":false,"level":1}]},{"number":4,"description":"Then I receive status code 400","duration":36,"startTime":"2024-06-13T22:21:17.942231900+07:00[Asia/Jakarta]","exception":{"errorType":"java.lang.AssertionError","message":"1 expectation failed.\nExpected status code \u003c400\u003e but was \u003c500\u003e.\n","stackTrace":[{"declaringClass":"io.restassured.internal.ResponseSpecificationImpl","methodName":"validateResponseIfRequired","fileName":"ResponseSpecificationImpl.groovy","lineNumber":696},{"declaringClass":"io.restassured.internal.ResponseSpecificationImpl","methodName":"this$2$validateResponseIfRequired","fileName":"ResponseSpecificationImpl.groovy","lineNumber":-1},{"declaringClass":"io.restassured.internal.ResponseSpecificationImpl","methodName":"statusCode","fileName":"ResponseSpecificationImpl.groovy","lineNumber":135},{"declaringClass":"io.restassured.internal.ResponseSpecificationImpl","methodName":"statusCode","fileName":"ResponseSpecificationImpl.groovy","lineNumber":143},{"declaringClass":"io.restassured.internal.ValidatableResponseOptionsImpl","methodName":"statusCode","fileName":"ValidatableResponseOptionsImpl.java","lineNumber":89},{"declaringClass":"starter.user.auth.CustomerRegister","methodName":"lambda$receiveStatusCodeRegister400$8","fileName":"CustomerRegister.java","lineNumber":101},{"declaringClass":"net.serenitybdd.rest.SerenityRest","methodName":"restAssuredThat","fileName":"SerenityRest.java","lineNumber":626},{"declaringClass":"starter.user.auth.CustomerRegister","methodName":"receiveStatusCodeRegister400","fileName":"CustomerRegister.java","lineNumber":101},{"declaringClass":"starter.stepdefinitions.auth.CustomerRegisterSteps","methodName":"receiveStatusCodeRegister400","fileName":"CustomerRegisterSteps.java","lineNumber":47},{"declaringClass":"✽","methodName":"I receive status code 400","fileName":"file:///F:/Alterra/Capstone/API/Blueharvest-API/Blueharvest%20-%20API/src/test/resources/blueharvest-api/features/api/promo/Admin/CreateNewPromo.feature","lineNumber":14}]},"result":"FAILURE","precondition":false,"level":0},{"number":5,"description":"And I receive an error promo message about unauthorized access","duration":0,"startTime":"2024-06-13T22:21:17.982174900+07:00[Asia/Jakarta]","result":"SKIPPED","precondition":false,"level":0}],"userStory":{"id":"api/promo/Admin/CreateNewPromo","storyName":"Create New Promo","displayName":"Create New Promo","path":"api/promo/Admin/CreateNewPromo","pathElements":[{"name":"api","description":""},{"name":"promo","description":""},{"name":"Admin","description":""},{"name":"CreateNewPromo","description":""}],"narrative":"  As a user\n  I want to create a new promo\n  So that I can add promotional offers to the system","type":"feature"},"title":"User fails to create a new promo due to missing required fields","description":"","startTime":"2024-06-13T22:21:17.672838+07:00[Asia/Jakarta]","duration":24,"testFailureCause":{"errorType":"java.lang.AssertionError","message":"1 expectation failed.\nExpected status code \u003c400\u003e but was \u003c500\u003e.\n","stackTrace":[{"declaringClass":"io.restassured.internal.ResponseSpecificationImpl","methodName":"validateResponseIfRequired","fileName":"ResponseSpecificationImpl.groovy","lineNumber":696},{"declaringClass":"io.restassured.internal.ResponseSpecificationImpl","methodName":"this$2$validateResponseIfRequired","fileName":"ResponseSpecificationImpl.groovy","lineNumber":-1},{"declaringClass":"io.restassured.internal.ResponseSpecificationImpl","methodName":"statusCode","fileName":"ResponseSpecificationImpl.groovy","lineNumber":135},{"declaringClass":"io.restassured.internal.ResponseSpecificationImpl","methodName":"statusCode","fileName":"ResponseSpecificationImpl.groovy","lineNumber":143},{"declaringClass":"io.restassured.internal.ValidatableResponseOptionsImpl","methodName":"statusCode","fileName":"ValidatableResponseOptionsImpl.java","lineNumber":89},{"declaringClass":"starter.user.auth.CustomerRegister","methodName":"lambda$receiveStatusCodeRegister400$8","fileName":"CustomerRegister.java","lineNumber":101},{"declaringClass":"net.serenitybdd.rest.SerenityRest","methodName":"restAssuredThat","fileName":"SerenityRest.java","lineNumber":626},{"declaringClass":"starter.user.auth.CustomerRegister","methodName":"receiveStatusCodeRegister400","fileName":"CustomerRegister.java","lineNumber":101},{"declaringClass":"starter.stepdefinitions.auth.CustomerRegisterSteps","methodName":"receiveStatusCodeRegister400","fileName":"CustomerRegisterSteps.java","lineNumber":47},{"declaringClass":"✽","methodName":"I receive status code 400","fileName":"file:///F:/Alterra/Capstone/API/Blueharvest-API/Blueharvest%20-%20API/src/test/resources/blueharvest-api/features/api/promo/Admin/CreateNewPromo.feature","lineNumber":14}]},"testFailureClassname":"java.lang.AssertionError","testFailureMessage":"1 expectation failed.\nExpected status code \u003c400\u003e but was \u003c500\u003e.\n","testFailureSummary":"FAILURE;java.lang.AssertionError;1 expectation failed.\nExpected status code \u003c400\u003e but was \u003c500\u003e.\n;ResponseSpecificationImpl.groovy","projectKey":"","annotatedResult":"FAILURE","isManualTestingUpToDate":false,"manual":false,"testSource":"Cucumber","order":0,"result":"FAILURE"}